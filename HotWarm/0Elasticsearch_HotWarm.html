<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>0Elasticsearch_HotWarm</title></head><body><div style="font-family: gotham,helvetica,arial,sans-serif; font-size: 14px;"><br></div><div style="font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(255, 0, 0);">***Elassticsearch &#35201;&#38283; CORS&#65292;&#19981;&#35201;&#20351;&#29992; POSTMAN&#65292;&#19981;&#28982; Elasticsearch &#26371;&#22238;&#25033; 403 Forbidden</span></div><ul style="font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><li><span style="color: rgb(0, 0, 0);">Chrome &#21487;&#20351;&#29992; ARC (Advanced Rest client)</span></li><li>

<span style="color: rgb(0, 0, 255); font-family: gotham,helvetica,arial,sans-serif; font-size: 14px;"><span style="color: rgb(128, 0, 128);">elasticsearch.yml</span> <span style="color: rgb(0, 0, 0);">CORS &#35373;&#23450;&#35352;&#24471;&#21152;&#19978;</span></span><ul><li><span style="color: rgb(0, 0, 0);"><span style="color: rgb(0, 0, 255);">http.cors.allow-origin</span>: <span style="color: rgb(255, 0, 0);">*</span>&nbsp;</span></li><li><span style="color: rgb(0, 0, 0);"><span style="color: rgb(0, 0, 255);">http.cors.enabled</span>: <span style="color: rgb(255, 0, 0);">true</span> </span></li></ul></li></ul><div style="font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><br></div><ol style="font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><li>&nbsp;ES (Data) Node &#35373;&#23450;(<span style="color: rgb(128, 0, 128);">elasticsearch.yml</span>)&#20197;&#19979;&#24190;&#32068;&#21443;&#25976;<br></li></ol><div style="font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><br></div><ul style="font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><li><span style="color: rgb(255, 0, 0);">Hot </span>Node 1<ul style="font-family: gotham,helvetica,arial,sans-serif; font-size: 14px;"><li>cluster.name: myElast</li><li><span style="color: rgb(0, 0, 255);">cluster.routing.allocation.awareness.attributes</span>: <span style="color: rgb(255, 0, 0);">rack, zone</span></li><li>node.name: elast-1</li><li><span style="color: rgb(0, 0, 255);">node.attr.rack</span>: <span style="color: rgb(255, 0, 0);">r1</span></li><li><span style="color: rgb(0, 0, 255);">node.attr.zone</span>: <span style="color: rgb(255, 0, 0);">idc-tw</span></li><li><span style="color: rgb(0, 0, 255);">node.attr.box_type</span>: <span style="color: rgb(255, 0, 0);">hot</span></li></ul></li></ul><div style="font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(255, 0, 0);"><br></span></div><ul style="font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><li><span style="color: rgb(255, 0, 0);">Hot </span>Node 2<ul><li>cluster.name: myElast</li><li><span style="color: rgb(0, 0, 255);">cluster.routing.allocation.awareness.attributes</span>: <span style="color: rgb(255, 0, 0);">rack, zone</span></li><li>node.name: elast-2</li><li><span style="color: rgb(0, 0, 255);">node.attr.rack</span>: <span style="color: rgb(255, 0, 0);">r2</span></li><li><span style="color: rgb(0, 0, 255);">node.attr.zone</span>: <span style="color: rgb(255, 0, 0);">idc-tw</span></li><li><span style="color: rgb(0, 0, 255);">node.attr.box_type</span>: <span style="color: rgb(255, 0, 0);">hot</span></li></ul></li></ul><div style="font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(255, 0, 0);"><br></span></div><ul style="font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><li><span style="color: rgb(0, 0, 0);"><span style="color: rgb(153, 51, 0);">Warm </span>Node 1</span><ul style="font-family: gotham,helvetica,arial,sans-serif; font-size: 14px;"><li>Cluster.name: myElast</li><li><span style="color: rgb(0, 0, 255);">cluster.routing.allocation.awareness.attributes</span>: <span style="color: rgb(255, 0, 0);">rack, zone</span></li><li>node.name: elast-3</li><li><span style="color: rgb(0, 0, 255);">node.attr.rack</span>: <span style="color: rgb(255, 0, 0);">r3</span></li><li><span style="color: rgb(0, 0, 255);">node.attr.zone</span>: <span style="color: rgb(255, 0, 0);">idc-tw</span></li><li><span style="color: rgb(0, 0, 255);">node.attr.box_type</span>: <span style="color: rgb(128, 0, 0);">warm</span></li></ul></li></ul><div style="font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(128, 0, 0);"><br></span></div><ol start="2" style="font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><li><span style="color: rgb(0, 0, 0);">&#38928;
&#35373;&#25152;&#26377; index template &#37117;&#20808;&#25918;&#21040; Hot Nodes&#65292;&#23578;&#26410; Assigned&#20301;&#32622;&#30340;&#20808;&#31561;&#21313;&#20998;&#37912;&#20877;&#27770;&#23450;&#65292;&#22312;Cluster
rebuild&#26178;(Shards &#25499;&#20102;&#65292;Nodes&#22833;&#32879;&#25110;&#25499;&#20102;)&#36895;&#24230;&#26371;&#36611;&#24555;&#65292;&#31561;Nodes&#29376;&#24907;&#31337;&#23450;&#24460;&#20877;&#27770;&#23450;&#35201;&#23531;&#21040;&#37027;&#20123; Nodes&#12290;</span></li></ol><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 0, 0);"><span style="color: rgb(255, 0, 0);">PUT</span>
</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 0, 0);">http://172.16.160.91:9200/<span style="color: rgb(0, 0, 255);">_template/*</span>
</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 0, 0);"><br></span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);">{
</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);">&nbsp;   "template" : "*",
</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);">&nbsp;   "settings" :{
</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);">&nbsp;   "index": {        
</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);">&nbsp;       "routing.allocation.require.box_type": "hot",
</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);">&nbsp;       "unassigned.node_left.delayed_timeout": "10m"
</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);">&nbsp;   }
</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);">&nbsp;   }
</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);">}</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);"><br></span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 0, 0);">2.1 &#21934;&#29544;&#35373;&#23450;&#29694;&#26377; Index &#20840;&#37117;&#25918;&#22312; Hot Node</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(255, 0, 0);">PUT
</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 0, 0);"><br></span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 0, 0);">http://172.16.160.92:9200/<span style="color: rgb(0, 0, 255);">_all/_settings</span>
</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 0, 0);"><br></span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);">{
</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);">&nbsp;   "index.routing.allocation.require.box_type": "hot"  
</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);">}</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);"><br></span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 0, 0);">2.2 &#21934;&#29544;&#35373;&#23450;&#26576;&#19968;&#20491; Index &#25918;&#21040; Hot Node</span></div><div style="font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;">

<div style="margin-left: 40px; font-family: gotham,helvetica,arial,sans-serif; font-size: 14px;"><span style="color: rgb(255, 0, 0);">PUT
</span></div></div><div style="font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px; margin-left: 40px;"><span style="color: rgb(0, 0, 0);"><br></span></div><div style="font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px; margin-left: 40px;"><span style="color: rgb(0, 0, 0);">http://172.16.160.92:9200/<span style="color: rgb(0, 0, 255);">winlogbeat-2017.12.05/_settings</span>
</span></div><div style="font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 0, 0);"><br></span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);">{
</span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);">&nbsp;   "index.routing.allocation.require.box_type": "hot"  
</span></div></div><div style="font-family: gotham,helvetica,arial,sans-serif; font-size: 14px; margin-left: 40px;"><span style="color: rgb(0, 128, 0);">}</span></div><div style="font-family: gotham,helvetica,arial,sans-serif; font-size: 14px; margin-left: 40px;"><span style="color: rgb(0, 128, 0);"><br></span></div><div style="font-family: gotham,helvetica,arial,sans-serif; font-size: 14px; margin-left: 40px;"><span style="color: rgb(0, 0, 0);">2.3&nbsp;&#35373;&#23450;&#25152;&#26377;&#30340; Index Shards assigned to Nodes, &#24310;&#36978; 10 &#20998;&#37912;
</span></div><div style="font-family: gotham,helvetica,arial,sans-serif; font-size: 14px; margin-left: 40px;"><span style="color: rgb(0, 128, 0);"><br></span></div><div style="font-family: gotham,helvetica,arial,sans-serif; font-size: 14px; margin-left: 40px;"><span style="color: rgb(255, 0, 0);">PUT
</span></div><div style="font-family: gotham,helvetica,arial,sans-serif; font-size: 14px; margin-left: 40px;"><span style="color: rgb(0, 128, 0);"><br></span></div><div style="font-family: gotham,helvetica,arial,sans-serif; font-size: 14px; margin-left: 40px;"><span style="color: rgb(0, 128, 0);"><span style="color: rgb(0, 0, 0);">http://172.16.160.92:9200/</span><span style="color: rgb(0, 0, 255);">_all/_settings
</span></span></div><div style="margin-left: 40px; font-family: &quot;Helvetica Neue&quot;,Arial,sans; font-size: 16px;"><span style="color: rgb(0, 128, 0);"><br></span></div><div style="font-family: gotham,helvetica,arial,sans-serif; font-size: 14px; margin-left: 40px;"><span style="color: rgb(0, 128, 0);">{
</span></div><div style="font-family: gotham,helvetica,arial,sans-serif; font-size: 14px; margin-left: 40px;"><span style="color: rgb(0, 128, 0);">&nbsp;   "index.unassigned.node_left.delayed_timeout": "10m"  
</span></div><div style="font-family: gotham,helvetica,arial,sans-serif; font-size: 14px; margin-left: 40px;"><span style="color: rgb(0, 128, 0);">}</span></div><div style="font-family: gotham,helvetica,arial,sans-serif; font-size: 14px; margin-left: 40px;"><span style="color: rgb(0, 128, 0);"><br></span></div><div style="font-family: gotham,helvetica,arial,sans-serif; font-size: 14px;"></div></body></html>